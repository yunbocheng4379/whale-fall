"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[739],{55134:function(J,S,e){e.d(S,{Z:function(){return h}});var x=e(30518),i=e(45803),Z=e(54683),r=e(87103),C=200,y=401,U=402,l=e(85645),c=l.MU,g="";/:/i.test(window.location.host)?g="http://"+window.location.hostname+":"+c:g="http://"+window.location.host;var m=Z.Z.create({baseURL:g,timeout:3e4,withCredentials:!0});m.interceptors.request.use(function(t){return(0,r.LP)()&&(t.headers[l.B1]=(0,r.LP)()),t},function(t){return Promise.reject(t)}),m.interceptors.response.use(function(t){if(!t.data){i.ZP.error("\u670D\u52A1\u5668\u7F3A\u5C11\u54CD\u5E94\u6570\u636E");return}console.log(t);var p=t.data,d=p.code,f=p.message;return d===y||d===U?(i.ZP.warning(f),(0,r.LP)()&&(0,r.gy)(),x.history.push(l.wm),Promise.reject(f)):(d!==C&&f&&i.ZP.error(f),t.data)},function(t){return console.log(t.response),i.ZP.error("\u670D\u52A1\u5668\u54CD\u5E94\u9519\u8BEF"),Promise.reject(t)});var h=m},39026:function(J,S,e){e.r(S),e.d(S,{default:function(){return V}});var x=e(97857),i=e.n(x),Z=e(15009),r=e.n(Z),C=e(99289),y=e.n(C),U=e(5574),l=e.n(U),c=e(85645),g=e(68854),m=function(v){return new Promise(function(O){setTimeout(function(){O(!0)},v*1e3)})},h=e(87103),t=e(87547),p=e(94149),d=e(33526),f=e(89530),W=e(93759),K=e(45803),Y=e(50960),P=e(67294),D=e(30518),H=e(55134),N={login:function(v){return(0,H.Z)({url:"user/login",method:"POST",data:v})}},s=e(85893),Q=function(){var v=(0,D.useModel)("@@initialState"),O=v.initialState,X=v.setInitialState,b=(0,P.useState)("account"),I=l()(b,2),w=I[0],k=I[1],q=(0,P.useState)(!1),M=l()(q,2),_=M[0],E=M[1];(0,P.useEffect)(function(){(0,h.LP)()&&(window.history.replaceState&&window.history.replaceState(null,null,window.location.href),D.history.push(c.a0))},[]);var ee=function(){var j=y()(r()().mark(function o(u){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return E(!0),n.next=3,m(.6);case 3:if(w!=="account"){n.next=8;break}return n.next=6,te(u);case 6:n.next=9;break;case 8:K.ZP.warning("\u65B0\u767B\u5F55\u7C7B\u578B\u5F85\u5F00\u53D1");case 9:case"end":return n.stop()}},o)}));return function(u){return j.apply(this,arguments)}}(),te=function(){var j=y()(r()().mark(function o(u){var T,n,L,R,B,$,A,z,G;return r()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,N.login(u);case 2:if(T=a.sent,n=T.success,L=T.data,!(n&&L!==null&&L!==void 0&&L.token)){a.next=18;break}if((0,h.o4)(L.token),(0,h.b6)(u.username),R={data:[{text:"\u6B22\u8FCE",route:"/welcome",rank:0}],success:!0},B=R.success,$=R.data,!(B&&$.length>0)){a.next=13;break}return A=(0,g.Z)($),z=A.menuData,G=A.routeList,a.next=13,X(i()(i()({},O),{},{currentUser:{name:u.username},menuData:z,routeList:G}));case 13:return a.next=15,E(!1);case 15:D.history.push(c.a0),a.next=19;break;case 18:E(!1);case 19:case"end":return a.stop()}},o)}));return function(u){return j.apply(this,arguments)}}(),ne=[{label:"\u8D26\u53F7\u767B\u5F55",key:"account"}],ae=(0,s.jsxs)(P.Fragment,{children:[(0,s.jsx)(d.Z,{name:"username",fieldProps:{size:"large",prefix:(0,s.jsx)(t.Z,{})},placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",rules:[{required:!0,type:"string",whitespace:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\uFF01"}]}),(0,s.jsx)(d.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,s.jsx)(p.Z,{})},placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,type:"string",whitespace:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"}]})]});return(0,s.jsx)(f._Y,{dark:!0,children:(0,s.jsxs)(W.B,{backgroundImageUrl:"/img/background.jpg",logo:c.us,title:c.R,disabled:_,onFinish:ee,children:[(0,s.jsx)(Y.Z,{centered:!0,activeKey:w,items:ne,onChange:function(o){return k(o)}}),w==="account"&&ae]})})},V=Q}}]);
